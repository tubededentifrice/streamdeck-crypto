<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui,viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>com.courcelle.cryptoticker.ticker.property_inspector</title>
    <link rel="stylesheet" href="css/pi.css">
</head>

<body>
    <div class="sdpi-wrapper">
        <div class="sdpi-item">
            <div class="sdpi-item-label">Real title</div>
            <input type="text" class="sdpi-item-value" id="input-title" name="input-title" value="">
        </div>
        <div class="sdpi-item">
            <div class="sdpi-item-label">Provider</div>
            <select class="sdpi-item-value select" id="select-provider" name="select-provider"></select>
        </div>
        <div id="pair-search-group" class="sdpi-item">
            <div class="sdpi-item-label">Search pairs</div>
            <div class="sdpi-item-value pair-search-container">
                <input type="text" class="pair-search-input" id="select-pair-search" name="select-pair-search"
                    autocomplete="off" placeholder="Type to filter pairs" disabled>
                <div id="pair-search-feedback" class="pair-search-feedback" role="status" aria-live="polite"></div>
            </div>
        </div>
        <div id="select-pair-dropdown-group" class="sdpi-item">
            <div class="sdpi-item-label">Choose a pair</div>
            <select class="sdpi-item-value select" id="select-pair-dropdown" name="select-pair-dropdown"></select>
        </div>
        <div id="select-pair-input-group" class="sdpi-item">
            <div class="sdpi-item-label">Enter a pair / symbol</div>
            <input type="text" class="sdpi-item-value" id="select-pair" name="select-pair" value="">
        </div>

        <div class="currencyRelated">
            <div class="sdpi-item">
                <div class="sdpi-item-label">Convert to</div>
                <select class="sdpi-item-value select" id="select-currency" name="select-currency"></select>
            </div>
        </div>

        <div class="sdpi-item">
            <div class="sdpi-item-label">Multiplier</div>
            <input type="number" inputmode="numeric" class="sdpi-item-value" id="multiplier" name="multiplier" value="" step="0.01"
                placeholder="Enter a multiplier, defaults to 1" pattern="^\d*(\.\d+)?$">
        </div>
        <div class="sdpi-item">
            <div class="sdpi-item-label">Digits</div>
            <input type="number" inputmode="numeric" class="sdpi-item-value" id="digits" name="digits" value=""
                placeholder="Enter the number of digits to round values" pattern="^[0-9]*$">
        </div>
        <div class="sdpi-item">
            <div class="sdpi-item-label">Low/high digits</div>
            <input type="number" inputmode="numeric" class="sdpi-item-value" id="highLowDigits" name="highLowDigits" value=""
                placeholder="Optional. Uses Digits when empty" pattern="^[0-9]*$">
        </div>
        <div class="sdpi-item">
            <div class="sdpi-item-label">Price format</div>
            <select class="sdpi-item-value select" id="priceFormat" name="priceFormat">
                <option value="auto">Automatic</option>
                <option value="full">Full (eg. 119,662)</option>
                <option value="compact">Compact (eg. 119.66K)</option>
            </select>
        </div>
        <div class="sdpi-item">
            <div class="sdpi-item-label">Font</div>
            <input type="text" class="sdpi-item-value" id="font" name="font"
                placeholder="Font to use, comma separated (like CSS)">
        </div>
        <div class="sdpi-item">
            <div class="sdpi-item-label">Base font size</div>
            <input type="number" inputmode="numeric" class="sdpi-item-value" id="fontSizeBase" name="fontSizeBase" value=""
                placeholder="Default text size in px" pattern="^[0-9]*$" min="6" max="80">
        </div>
        <div class="sdpi-item">
            <div class="sdpi-item-label">Price font size</div>
            <input type="number" inputmode="numeric" class="sdpi-item-value" id="fontSizePrice" name="fontSizePrice" value=""
                placeholder="Price text size in px" pattern="^[0-9]*$" min="6" max="120">
        </div>
        <div class="sdpi-item">
            <div class="sdpi-item-label">Low/high font size</div>
            <input type="number" inputmode="numeric" class="sdpi-item-value" id="fontSizeHighLow" name="fontSizeHighLow" value=""
                placeholder="Optional. Defaults to base font size" pattern="^[0-9]*$" min="6" max="120">
        </div>
        <div class="sdpi-item">
            <div class="sdpi-item-label">Change font size</div>
            <input type="number" inputmode="numeric" class="sdpi-item-value" id="fontSizeChange" name="fontSizeChange" value=""
                placeholder="Daily change size in px" pattern="^[0-9]*$" min="6" max="80">
        </div>
        <div type="color" class="sdpi-item">
            <div class="sdpi-item-label">Background color</div>
            <input type="color" id="backgroundColor" name="backgroundColor" class="sdpi-item-value" value="#000000">
        </div>
        <div type="color" class="sdpi-item">
            <div class="sdpi-item-label">Text color</div>
            <input type="color" id="textColor" name="textColor" class="sdpi-item-value" value="#ffffff">
        </div>
        <div class="sdpi-item">
            <div class="sdpi-item-label">Alert rule</div>
            <input type="text" class="sdpi-item-value" id="alertRule" name="alertRule"
                placeholder="Example: value&gt;10 || value&lt;100">
            <div class="pi-input-error" id="alertRuleError" role="alert" aria-live="polite"></div>
        </div>
        <details>
                <summary>How alert rules work</summary>
                <p>Alert rules are validated expressions that run in a locked-down sandbox.</p>
                <p>When they return true, the text and background colors are inverted.</p>
                <p>Supported operators include +, -, *, /, %, comparison operators, logical &&/||, and the ternary (?:) syntax.</p>
                <p>Available variables: <em>value</em>, <em>changeDaily</em>, <em>changeDailyPercent</em>, <em>volume</em>, <em>high</em>, <em>low</em>.</p>
                <p><em>value</em> is the last price (displayed value).</p>
                <p><em>changeDaily</em> is the amount that the last price has changed since yesterday.</p>
                <p><em>changeDailyPercent</em> is the relative price change since yesterday (*100 for percentage change).</p>
                <p><em>volume</em> is daily volume.</p>
                <p><em>high</em> is the daily high.</p>
                <p><em>low</em> is the daily low.</p>

                <p>Alerts are only supported in "ticker" mode (ie not candlebars).</p>
        </details>
        <div class="sdpi-item">
            <div class="sdpi-item-label">Background color rule</div>
            <input type="text" class="sdpi-item-value" id="backgroundColorRule" name="backgroundColorRule"
                placeholder="Example: alert?'#cc0000':''">
            <div class="pi-input-error" id="backgroundColorRuleError" role="alert" aria-live="polite"></div>
        </div>
        <div class="sdpi-item">
            <div class="sdpi-item-label">Text color rule</div>
            <input type="text" class="sdpi-item-value" id="textColorRule" name="textColorRule"
                placeholder="Example: alert?'blue':''">
            <div class="pi-input-error" id="textColorRuleError" role="alert" aria-live="polite"></div>
        </div>
        <details>
                <summary>How color rules work</summary>
                <p>Color rules share the same sandboxed evaluator used for alerts.</p>
                <p>When they return a non empty color string, it overrides the default colors.</p>
                <p><em>alert</em> is a boolean indicating whether the alert mode is triggered (ie. the &quot;Alert rule&quot;).</p>
                <p><em>backgroundColor</em> and <em>textColor</em> hold the current colors after alert inversion.</p>
                <p><em>defaultBackgroundColor</em> and <em>defaultTextColor</em> expose the configured defaults.</p>
                <p><em>value</em> is the last price (displayed value).</p>
                <p><em>changeDaily</em> is the amount that the last price has changed since yesterday.</p>
                <p><em>changeDailyPercent</em> is the relative price change since yesterday (*100 for percentage change).</p>
                <p><em>volume</em> is daily volume.</p>
                <p><em>high</em> is the daily high.</p>
                <p><em>low</em> is the daily low.</p>
                <p>Color rules are only supported in "ticker" mode (ie not candlebars).</p>
        </details>

        <div class="sdpi-item">
            <div class="sdpi-item-label">Candles interval</div>
            <select class="sdpi-item-value select" id="candlesInterval" name="candlesInterval">
                    <option value="1m">1 minute</option>
                    <option value="5m">5 minutes</option>
                    <option value="15m">15 minutes</option>
                    <option value="30m">30 minutes</option>
                    <option value="1h">1 hour</option>
                    <option value="6h">6 hours</option>
                    <option value="12h">12 hours</option>
                    <option value="1D">1 day</option>
                    <option value="7D">7 days</option>
                    <option value="1M">1 month</option>
            </select>
        </div>
        <div class="sdpi-item">
            <div class="sdpi-item-label">Candles displayed</div>
            <input type="number" inputmode="numeric" class="sdpi-item-value" id="candlesDisplayed" name="candlesDisplayed"
                placeholder="Number of candles to draw" pattern="^[0-9]*$" min="5" max="60">
        </div>

        <div type="checkbox" class="sdpi-item">
            <div class="sdpi-item-label empty"></div>
            <div class="sdpi-item-value">
                <div class="sdpi-item-child">
                    <input id="displayHighLow" type="checkbox" value="on">
                    <label for="displayHighLow" class="sdpi-item-label"><span></span> Display daily low/high</label>
                </div>
            </div>
        </div>
        <div type="checkbox" class="sdpi-item">
            <div class="sdpi-item-label empty"></div>
            <div class="sdpi-item-value">
                <div class="sdpi-item-child">
                    <input id="displayHighLowBar" type="checkbox" value="on">
                    <label for="displayHighLowBar" class="sdpi-item-label"><span></span> Display daily low/high bar</label>
                </div>
            </div>
        </div>
        <div type="checkbox" class="sdpi-item">
            <div class="sdpi-item-label empty"></div>
            <div class="sdpi-item-value">
                <div class="sdpi-item-child">
                    <input id="displayDailyChange" type="checkbox" value="on">
                    <label for="displayDailyChange" class="sdpi-item-label"><span></span> Display daily change percent</label>
                </div>
            </div>
        </div>
        <div class="sdpi-item">
            <div class="sdpi-item-label">Connection status icon</div>
            <select class="sdpi-item-value select" id="displayConnectionStatusIcon" name="displayConnectionStatusIcon">
                <option value="OFF">Disabled</option>
                <option value="TOP_RIGHT">Top right corner</option>
                <option value="BOTTOM_LEFT">Bottom left corner</option>
            </select>
        </div>

        <details class="connection-state-help">
            <summary>What do connection states mean?</summary>
            <div class="connection-state-help-content">
                <div class="connection-state-entry">
                    <canvas class="connection-state-icon" width="40" height="40" data-connection-state="LIVE" aria-hidden="true"></canvas>
                    <div class="connection-state-text">
                        <div class="connection-state-label">LIVE</div>
                        <p>Connected to primary provider with live data (WebSocket, refresh in real time). Note: Yfinance doesn't have WebSocket, so can't be in this mode.</p>
                    </div>
                </div>
                <div class="connection-state-entry">
                    <canvas class="connection-state-icon" width="40" height="40" data-connection-state="DETACHED" aria-hidden="true"></canvas>
                    <div class="connection-state-text">
                        <div class="connection-state-label">DETACHED</div>
                        <p>WebSocket failed, using the provider's REST API instead (refresh every minute). Note: We don't support direct Yfinance calls yet, so can't be in this mode.</p>
                    </div>
                </div>
                <div class="connection-state-entry">
                    <canvas class="connection-state-icon" width="40" height="40" data-connection-state="BACKUP" aria-hidden="true"></canvas>
                    <div class="connection-state-text">
                        <div class="connection-state-label">BACKUP</div>
                        <p>Provider requests failed, using the legacy ticker proxy instead (refresh every 1-5 minutes).</p>
                    </div>
                </div>
                <div class="connection-state-entry">
                    <canvas class="connection-state-icon" width="40" height="40" data-connection-state="BROKEN" aria-hidden="true"></canvas>
                    <div class="connection-state-text">
                        <div class="connection-state-label">BROKEN</div>
                        <p>Failed to retrieve price (connection is down, pair is invalid, etc.)</p>
                    </div>
                </div>
            </div>
        </details>

    </div>

        <script src="js/providers/connection-states.js"></script>
        <script src="js/connection-status-icons.js"></script>
        <script src="js/pi.bundle.js"></script>
</body>

</html>
